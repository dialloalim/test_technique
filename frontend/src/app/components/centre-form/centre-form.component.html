

<div class="row justify-content-center mt-4">

    <div class="col-12 mb-3">
        <form [formGroup]="centreForm" (ngSubmit)="onSubmit()" class="centre-form">
            <mat-card>
              <mat-card-header>
                <mat-card-title>{{ centre.id === 0 ? 'Nouveau Centre' : 'Modifier Centre' }}</mat-card-title>
              </mat-card-header>
              
              <mat-card-content class="mt-3">
                <div class="row mb-3">
                    <div class="col-12 text-danger">
                        {{ error_message }}
                    </div>
                </div>

                <div class="form-row">
                  <mat-form-field appearance="outline" class="full-width">
                    <mat-label>Nom du Centre</mat-label>
                    <input matInput formControlName="nom" required>
                    <mat-error *ngIf="centreForm.get('nom')?.hasError('required')">
                      Le nom est obligatoire
                    </mat-error>
                    <mat-error *ngIf="centreForm.get('nom')?.hasError('maxlength')">
                      Le nom ne doit pas dépasser 100 caractères
                    </mat-error>
                  </mat-form-field>
                </div>
          
                <div class="form-row">
                  <mat-form-field appearance="outline" class="full-width">
                    <mat-label>Adresse</mat-label>
                    <input matInput formControlName="adresse" required>
                    <mat-error *ngIf="centreForm.get('adresse')?.hasError('required')">
                      L'adresse est obligatoire
                    </mat-error>
                    <mat-error *ngIf="centreForm.get('adresse')?.hasError('maxlength')">
                      L'adresse ne doit pas dépasser 200 caractères
                    </mat-error>
                  </mat-form-field>
                </div>
          
                <div class="form-row">
                  <mat-form-field appearance="outline" class="full-width">
                    <mat-label>Contact</mat-label>
                    <input matInput formControlName="contact" required>
                    <mat-error *ngIf="centreForm.get('contact')?.hasError('required')">
                      Le contact est obligatoire
                    </mat-error>
                    <mat-error *ngIf="centreForm.get('contact')?.hasError('pattern')">
                      Le contact doit contenir entre 9 et 15 chiffres
                    </mat-error>
                  </mat-form-field>
                </div>
          
                <div class="form-row">
                  <mat-form-field appearance="outline" class="full-width">
                    <mat-label>Spécialités</mat-label>
                    <mat-select formControlName="liste_specialites" multiple required>
                      <mat-option *ngFor="let specialite of centre.liste_specialites" [value]="specialite.id">
                        {{ specialite.nom }}
                      </mat-option>
                    </mat-select>
                    <mat-error *ngIf="centreForm.get('liste_specialites')?.hasError('required')">
                      Au moins une spécialité est requise
                    </mat-error>
                  </mat-form-field>
                </div>
              </mat-card-content>
          
              <mat-card-actions>
                <button mat-raised-button color="primary" type="submit" [disabled]="!centreForm.valid">
                  {{ centre.id === 0 ? 'Créer' : 'Mettre à jour' }}
                </button>
              </mat-card-actions>
            </mat-card>
          </form>
    </div>
</div>

